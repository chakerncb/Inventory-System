<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POS System</title>
    <link rel="stylesheet" href="/public/assets/css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <%- include('../layouts/alerts') %>

    

    <div class="container">
       
        <div class="cart-section">
            <button class="new-customer-btn" id="newCustomerBtn">+ New Customer</button>
            <div class="customer-select">
                <label>Customer</label>
                <select id="customerSelect">
                </select>
            </div>
            <div class="warehouse-select">
                <label>Warehouse</label>
                <select id="warehouseSelect" name="warehouse">
                    <option value="all">All Warehouses</option>
                   
                </select>
            </div>
            <table class="cart-table">
                <thead>
                    <tr>
                        <th>Product</th>
                        <th>Price</th>
                        <th>Qty</th>
                        <th>Subtotal</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody class="cartItems" id="cartItems">
                    
                </tbody>
            </table>
            
            
            <div class="cart-footer">
                <div class="total">
                    <p>Total :</p>
                    <p><input type="number" id="TotalPrice" readonly>DZ</p>
                </div>
                <div class="calculations">
                    <div class="calc-item">
                        <label>Discount</label>
                        <input type="number" id="discount" min="0" max="100" value="0">
                        <span>%</span>
                    </div>
                    <div class="calc-item">
                        <label>Shipping</label>
                        <input type="number" id="shipping" value="0">
                        <span>DZ</span>
                    </div>
                </div>
                <div class="action-buttons">
                    <button class="reset-btn" id="resetBtn">Reset</button>
                    <button class="pay-btn" id="payBtn">Pay Now</button>
                </div>
            </div>
        </div>
    
        
        <div class="products-section">
            <div class="product-header">
                <!-- <button class="add-product-btn" id="addProductBtn">+ Add New Product</button> -->
                <button class="category-btn" id="categoryListBtn">List of Category</button>
                <button class="brand-btn" id="settings-btn">Settings</button>
  
                <input type="text" class="search-input" id="search-input" placeholder="Search by Name">
            </div>
            <div class="products-grid" id="productsGrid">
                                       
            </div>
        </div>
    </div>

        
    <div class="category-list" id="categoryList">
        <h3>Categories</h3>
        <ul id="categoryListItems">
            
        </ul>
    </div>




<!-- Sidebar -->
<div id="sidebar" class="sidebar">
    <button id="close-sidebar" class="close-btn">&times;</button>
    <ul>
 
      <li><a href="#" id="logout-btn">Logout</a></li>
    </ul>
  </div>
  

  <!-- Logout Confirmation Modal -->
  <div id="logout-modal" class="modal">
    <div class="modal-content">
      <h3>Are you sure you want to logout?</h3>
      <div class="modal-actions">
        <button id="confirm-logout" class="modal-btn confirm">Yes</button>
        <button id="cancel-logout" class="modal-btn cancel">No</button>
      </div>
    </div>
  </div>
  
 
  


    <div class="modal" id="newCustomerModal">
        <div class="modal-content">
            <h2>Add New Customer</h2>
            <form id="newCustomerForm">
                <div class="form-group">
                    <label>Name</label>
                    <input type="text" name="name" required>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" name="email" required>
                </div>
                <div class="form-group">
                    <label>Phone</label>
                    <input type="tel" name="phone" required>
                </div>
                <button type="submit">Save Changes</button>
                <button type="button" class="close-btn">Cancel</button>
        </div>
    </div>
  </form>
        </div>
    </div>

    
    <div class="modal" id="newOrderModal">
        <div class="modal-content">
            
            </form>
        </div>
    </div>

    <div class="modal" id="orderValidationModal">
        <div class="modal-content">
            <h2>Order Validation</h2>
            <div id="orderInfo"></div>
            <button id="confirmOrderBtn">Confirm Order</button>
            <button class="close-btn" id="cancelOrderBtn">Cancel</button>
        </div>
    </div>


    <div class="invoice-model">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header border-bottom-0">
              <button onclick="closeInvoice()"  type="button" data-mdb-button-init data-mdb-ripple-init class="btn-close" data-mdb-dismiss="modal" aria-label="Close">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16">
                    <path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"/>
                  </svg>                  
              </button>
            </div>
            <div class="modal-body text-start p-4">
              <h5 class="modal-title text-uppercase mb-5" id="exampleModalLabel">Johnatan Miller</h5>
              <h4 class="mb-5">Thanks for your order</h4>
              <p class="mb-0">Payment summary</p>
              <hr class="mt-2 mb-4"
                style="height: 0; background-color: transparent; opacity: .75; border-top: 2px dashed #9e9e9e;">

              <div class="d-flex justify-content-between">
                <p class="fw-bold mb-0"></p>
                <p class="text-muted mb-0"></p>
              </div>

              <div class="d-flex justify-content-between">
                <p class="small mb-0"></p>
                <p class="small mb-0"></p>
              </div>

              <div class="d-flex justify-content-between pb-1">
                <p class="small"></p>
                <p class="small"></p>
              </div>

              <div class="d-flex justify-content-between">
                <p class="fw-bold"></p>
                <p class="fw-bold"></p>
              </div>

            </div>
            <div class=" d-flex justify-content-center border-top-0 py-4">
                <button id="printInvoiceBtn" style="display: none;">Print Invoice</button>
            </div>
          </div>
        </div>
      </div>
    

    <script src="/public/assets/js/posScript.js"></script>
    <script src="/scripts/seller/main.js" ></script>
    <script>
        function closeInvoice() {
            document.querySelector('.invoice-model').style.display = 'none';
        }

        function showInvoice(data) {
            document.querySelector('.invoice-model').style.display = 'block';
            document.querySelector('.modal-body').innerHTML = `
                <center>
                    <h4 style="margin-bottom: 20px;">Thanks for your order</h4>
                    <p style="font-weight: bold;">Payment summary</p>
                </center>
                <hr style="margin: 10px 0;">
                <table style="width: 100%; border-collapse: collapse; margin-bottom: 20px;">
                    <thead>
                        <tr style="background-color: #f2f2f2;">
                            <th style="padding: 10px; border: 1px solid #ddd;">Product</th>
                            <th style="padding: 10px; border: 1px solid #ddd;">Quantity</th>
                            <th style="padding: 10px; border: 1px solid #ddd;">Price</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${data.products.map(product => `
                            <tr>
                                <td style="padding: 10px; border: 1px solid #ddd;">${product.name}</td>
                                <td style="padding: 10px; border: 1px solid #ddd;">${product.quantity}</td>
                                <td style="padding: 10px; border: 1px solid #ddd;">${product.price} DA</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
                <div class="d-flex justify-content-between" style="font-weight: bold; margin-top: 20px;">
                    <p>Total</p>
                    <p>${data.totalPrice} DA</p>
                </div>
            `;
        }
    </script>
    <script>
        // Select elements
const settingsBtn = document.getElementById('settings-btn');
const sidebar = document.getElementById('sidebar');
const closeSidebar = document.getElementById('close-sidebar');
const logoutBtn = document.getElementById('logout-btn');
const logoutModal = document.getElementById('logout-modal');
const confirmLogout = document.getElementById('confirm-logout');
const cancelLogout = document.getElementById('cancel-logout');

// Toggle sidebar
settingsBtn.addEventListener('click', () => {
  sidebar.classList.toggle('active');
});

// Close sidebar
closeSidebar.addEventListener('click', () => {
  sidebar.classList.remove('active');
});

// Show logout modal
logoutBtn.addEventListener('click', () => {
  logoutModal.style.display = 'flex';
});

// Handle confirm logout
confirmLogout.addEventListener('click', () => {
  // Perform logout action
  window.location.href = '/login';
});

// Handle cancel logout
cancelLogout.addEventListener('click', () => {
  logoutModal.style.display = 'none';
});

    </script>
</body>
</html>